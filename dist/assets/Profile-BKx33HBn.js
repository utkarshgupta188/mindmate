import{u as h,r as m,b as j,j as e}from"./index-C4Srh_oV.js";import{l as v}from"./profileUtils-CQMFgpeE.js";function u(){const{user:t}=h(),c=t==null?void 0:t.email,[s,l]=m.useState(null),o=j();return m.useEffect(()=>{let a=!0;async function i(){try{const d=localStorage.getItem("mindmate_user_token");if(d){const x=await fetch("/api/auth/profile",{headers:{Authorization:`Bearer ${d}`}});if(x.ok){const n=await x.json();a&&l((n==null?void 0:n.profile)||null);return}}}catch{}const r=v(c);a&&r?l(r):a&&l({name:(t==null?void 0:t.name)||"",username:(t==null?void 0:t.username)||"",email:(t==null?void 0:t.email)||""})}return i(),()=>{a=!1}},[c,t]),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card flex flex-col md:flex-row items-start gap-6",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("div",{className:"w-28 h-28 rounded-2xl overflow-hidden bg-slate-100 dark:bg-slate-800 flex items-center justify-center",children:s!=null&&s.image?e.jsx("img",{src:s.image,alt:s.name||"Profile",className:"w-full h-full object-cover"}):e.jsx("div",{className:"text-slate-400",children:"No photo"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:(s==null?void 0:s.name)||"Your name"}),e.jsxs("div",{className:"text-sm text-slate-500",children:["@",(s==null?void 0:s.username)||"username"]})]}),e.jsx("div",{className:"ml-auto",children:e.jsxs("button",{className:"px-3 py-2 rounded-xl border flex items-center gap-2",onClick:()=>o("/profile/edit"),"aria-label":"Edit profile",title:"Edit profile (settings)",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",className:"opacity-90",children:[e.jsx("path",{d:"M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06A2 2 0 0 1 2.28 17.4l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H2a2 2 0 0 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82L3.21 2.28A2 2 0 0 1 6.04.45l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V0a2 2 0 0 1 4 0v.09c.06.6.44 1.1 1 1.51h.06a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.06c.41.56 1 1 1.51 1H24a2 2 0 0 1 0 4h-.09c-.5 0-1.1.44-1.51 1z",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("span",{className:"text-sm",children:"Edit"})]})})]}),e.jsx("p",{className:"mt-3 text-slate-600 dark:text-slate-400",children:(s==null?void 0:s.bio)||"A short bio will appear here."}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-3 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Contact"}),e.jsxs("div",{className:"mt-1 text-sm",children:[s!=null&&s.email?e.jsxs("a",{href:`mailto:${s.email}`,children:["ðŸ“§ ",s.email]}):e.jsx("div",{className:"text-xs text-slate-400",children:"Email not set"}),s!=null&&s.phone?e.jsxs("div",{className:"mt-1",children:["ðŸ“ž ",s.phone]}):e.jsx("div",{className:"text-xs text-slate-400",children:"Phone not set"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Parental / Loved ones"}),e.jsx("div",{className:"mt-1 text-sm",children:s!=null&&s.parentalContact&&s.parentalContact.length?s.parentalContact.map((a,i)=>e.jsxs("div",{className:"mb-1",children:[e.jsx("div",{className:"font-medium",children:a.name||"Contact"}),e.jsx("div",{className:"text-xs text-slate-500",children:a.email||a.phone||"-"})]},i)):e.jsx("div",{className:"text-xs text-slate-400",children:"Not configured"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Instagram"}),e.jsx("div",{className:"mt-1 text-sm",children:s!=null&&s.instagram?e.jsxs("a",{href:`https://instagram.com/${s.instagram}`,target:"_blank",rel:"noreferrer",children:["@",s.instagram]}):e.jsx("span",{className:"text-xs text-slate-400",children:"Not set"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Facebook"}),e.jsx("div",{className:"mt-1 text-sm",children:s!=null&&s.facebook?e.jsx("a",{href:`https://facebook.com/${s.facebook}`,target:"_blank",rel:"noreferrer",children:s.facebook}):e.jsx("span",{className:"text-xs text-slate-400",children:"Not set"})})]})]})]})]})})}export{u as default};
