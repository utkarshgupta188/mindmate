import{c as u,r as o,j as e,m as d,A as b,u as j}from"./index-C4Srh_oV.js";import{S as k}from"./sparkles-DBi3gq2A.js";import{F as v}from"./filter-uHSt3H5T.js";import{P as N}from"./play-BTGgS62S.js";import{C as S}from"./circle-check-C9zYruw1.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=u("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=u("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=u("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=u("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),c={resilience:{label:"Resilience",desc:"Bouncing back, persistence, growth"},focus:{label:"Focus",desc:"Deep work, study energy, clarity"},gratitude:{label:"Gratitude",desc:"Appreciation, small joys, perspective"},sleep:{label:"Sleep",desc:"Calm, rest, reset"},anxiety:{label:"Anxiety Relief",desc:"Breathing, grounding, compassion"}},A=[{id:"rowling",name:"J.K. Rowling",category:"resilience",text:"Before Harry Potter, she faced years of rejection and personal hardship. She kept writing through uncertainty, proving that persistence can transform a low point into a turning point.",img:"https://images.unsplash.com/photo-1461720525938-0a521f614f40?w=800&q=60"},{id:"jobs",name:"Steve Jobs",category:"resilience",text:"He was fired from the company he founded, then used that setback to learn, rebuild, and return stronger — a reminder that a detour can shape your best work.",img:"https://images.unsplash.com/photo-1485217988980-11786ced9454?w=800&q=60"},{id:"oprah",name:"Oprah Winfrey",category:"gratitude",text:"Early career setbacks and adversity didn’t define her. Compassion, consistency, and self-belief did. She turned vulnerability into connection.",img:"https://images.unsplash.com/photo-1515488042361-ee00e0ddd4e4?w=800&q=60"},{id:"malala",name:"Malala Yousafzai",category:"resilience",text:"She transformed pain into purpose, advocating for education with courage. Even small steps toward what matters are powerful.",img:"https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?w=800&q=60"}],E={resilience:["H14bBuluwB8","hiiEeMN7vbQ","wHGqp8lz36c"],focus:["jfKfPfyJRdk","DWcJFNfaw9c","5yx6BWlEVcY"],gratitude:["itZMM5gCboo","Ukg_U3CnJWI","d4S4twjeWTs"],sleep:["1ZYbU82GVz4","jfKfPfyJRdk","DWcJFNfaw9c"],anxiety:["ZToicYcHIOU","W19PdslW7iw","O-6f5wQXSu8"]};function P(){const{user:r}=j(),a=r!=null&&r.email?`prefs:${r.email}`:"prefs:anon",[s,l]=o.useState(()=>{try{return JSON.parse(localStorage.getItem(a)||"{}")}catch{return{}}});function n(x,i){const m=i.category?`cat:${i.category}`:i.storyId?`story:${i.storyId}`:i.videoId?`vid:${i.videoId}`:"misc",h={...s,[m]:(s[m]||0)+1};l(h);try{localStorage.setItem(a,JSON.stringify(h))}catch{}fetch("/api/prefs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:r==null?void 0:r.email,action:x,...i,ts:Date.now()})}).catch(()=>{})}return{prefs:s,record:n}}function R(r){const a=[...r];for(let s=a.length-1;s>0;s--){const l=Math.floor(Math.random()*(s+1)),n=a[s];a[s]=a[l],a[l]=n}return a}function B(){const{prefs:r,record:a}=P(),[s,l]=o.useState("resilience"),[n,x]=o.useState(!0),i=o.useRef(null);o.useEffect(()=>{if(!n){i.current&&window.clearInterval(i.current);return}return i.current=window.setInterval(()=>{const t=Object.keys(c),p=t.indexOf(s),y=t[(p+1)%t.length];l(y)},2e4),()=>{i.current&&window.clearInterval(i.current)}},[s,n]);const m=o.useMemo(()=>R(A.filter(t=>t.category===s)),[s]),h=o.useMemo(()=>(E[s]||[]).slice(0,3),[s]),g=o.useMemo(()=>{const t=Object.entries(r).filter(([f])=>f.startsWith("cat:"));if(!t.length)return null;t.sort((f,w)=>w[1]-f[1]);const p=t[0];return p?p[0].split(":")[1]:null},[r]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(d.section,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.4},className:"rounded-2xl border border-slate-200/60 dark:border-slate-800/60 bg-white/70 dark:bg-slate-900/60 backdrop-blur p-6",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-semibold flex items-center gap-2",children:[e.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-xl bg-gradient-to-tr from-indigo-500 to-cyan-500 text-white shadow",children:e.jsx(k,{className:"h-5 w-5"})}),"Motivations"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Pick a category, watch a short video, or read a quick story. Your choices tune your feed in real time."}),g&&e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 inline-flex items-center gap-2",children:[e.jsx(C,{className:"h-3.5 w-3.5"})," You seem to enjoy ",e.jsx("b",{className:"capitalize",children:c[g].label})," — we’ll show you a bit more of that."]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("button",{onClick:()=>x(t=>!t),className:`text-xs rounded-full border px-3 py-1.5 inline-flex items-center gap-1 ${n?"bg-white/80 dark:bg-slate-950/40":""}`,"aria-pressed":n,title:"Auto-rotate categories every 20s",children:[e.jsx(O,{className:"h-3.5 w-3.5"})," Auto"]})})]}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:Object.keys(c).map(t=>e.jsxs("button",{onClick:()=>{l(t),a("view",{category:t})},className:`text-xs rounded-full border px-3 py-1.5 inline-flex items-center gap-2 ${s===t?"bg-slate-900 text-white dark:bg-white dark:text-slate-900":"bg-white/70 dark:bg-slate-950/40"}`,children:[e.jsx(v,{className:"h-3.5 w-3.5"})," ",c[t].label]},t))})]}),e.jsx(b,{mode:"popLayout",children:e.jsx(d.section,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.35},className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(t=>e.jsxs(d.div,{layout:!0,className:"group rounded-2xl border border-slate-200/60 dark:border-slate-800/60 bg-white/70 dark:bg-slate-900/60 backdrop-blur overflow-hidden hover:shadow-lg hover:-translate-y-0.5 transition",children:[e.jsx("img",{src:t.img,alt:t.name,className:"w-full h-40 object-cover"}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold",children:t.name}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 mt-1",children:t.text}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>a("like",{storyId:t.id,category:t.category}),className:"text-xs inline-flex items-center gap-1 rounded-full border px-3 py-1.5 hover:bg-slate-50 dark:hover:bg-slate-800",children:[e.jsx(M,{className:"h-3.5 w-3.5"})," Like"]}),e.jsxs("button",{onClick:()=>a("save",{storyId:t.id,category:t.category}),className:"text-xs inline-flex items-center gap-1 rounded-full border px-3 py-1.5 hover:bg-slate-50 dark:hover:bg-slate-800",children:[e.jsx(I,{className:"h-3.5 w-3.5"})," Save"]})]})]})]},t.id))},`${s}-stories`)}),e.jsxs(d.section,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.4},className:"rounded-2xl border border-slate-200/60 dark:border-slate-800/60 bg-white/70 dark:bg-slate-900/60 backdrop-blur p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-xl bg-gradient-to-tr from-indigo-500 to-cyan-500 text-white shadow",children:e.jsx(N,{className:"h-5 w-5"})})," Quick videos"]}),e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Category: ",e.jsx("b",{className:"capitalize",children:c[s].label})]})]}),e.jsx("div",{className:"mt-4 grid md:grid-cols-3 gap-4",children:h.map(t=>e.jsxs("div",{className:"rounded-2xl overflow-hidden border border-slate-200/60 dark:border-slate-800/60 bg-white/60 dark:bg-slate-900/60",children:[e.jsx("iframe",{className:"w-full aspect-video",src:`https://www.youtube-nocookie.com/embed/${t}?rel=0`,title:"Motivation video",loading:"lazy",referrerPolicy:"strict-origin-when-cross-origin",allow:"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,onLoad:()=>a("play",{category:s,videoId:t})}),e.jsxs("div",{className:"px-3 py-2 text-xs text-slate-600 dark:text-slate-300 border-t border-slate-200/60 dark:border-slate-800/60 flex items-center justify-between",children:[e.jsx("span",{children:"Having trouble? Open on YouTube"}),e.jsx("a",{className:"underline",target:"_blank",rel:"noopener noreferrer",href:`https://www.youtube.com/watch?v=${t}`,children:"Open"})]})]},t))})]}),e.jsx(T,{})]})}function T(){const[r,a]=o.useState(null);return o.useEffect(()=>{window.motivateToast=s=>{a(s),setTimeout(()=>a(null),1500)}},[]),e.jsx(b,{children:r&&e.jsxs(d.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},exit:{opacity:0,y:6},transition:{duration:.2},className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50 rounded-full border bg-white/90 dark:bg-slate-900/90 backdrop-blur px-3 py-1.5 text-xs flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4"})," ",r]})})}export{B as default};
